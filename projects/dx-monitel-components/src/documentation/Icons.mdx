import { Meta, Source } from "@storybook/blocks";

<Meta title="Documentation/Работа с svg-пиктограммами" />

# Работа с svg-пиктограммами

## Для разработчиков (подключение и использование библиотеки иконок):

[1. Подключение](#icon-install)

[2. Использование иконок в разметке](#icon-in-markup)

[3. Использование иконок в компонентах DevExtreme](#icon-in-dx)

[4. API](#api)

[5. Изменение размера иконки](#color)

<h3 id="icon-install">Подключение библиотеки иконок</h3>

1. Установить пакет иконок [@monitel/me-icon](https://cl-tfs2022.monitel.local/CK-11/Development/_artifacts/feed/Integration/Npm/@monitel%2Fme-icons/overview) и [@monitel/me-icon-registry](https://cl-tfs2022.monitel.local/CK-11/Development/_artifacts/feed/Integration/Npm/@monitel%2Fme-icons-registry/overview)

<Source
  code={`npm install @monitel/me-icons
npm install @monitel/me-icons-registry`}
  language="bash"
  dark
/>

2. Импортировать модуль <b>MeIconsModule</b> в приложение

<Source
  code={`import { MeIconsModule } from '@monitel/me-icons-registry';
 
 @NgModule({
  declarations: [
    AppComponent,
  ],
  imports: [
    ...
    MeIconsModule
  ],
  providers: [],
  bootstrap: [AppComponent],
})

export class AppModule { }`}
  language="js"
  dark
/>

<h4>Регистрация иконок (быстрый способ)</h4>

В случае, если необходимо использовать большое количество иконок и нет желания регистрировать иконки по отдельности, можно зарегистрировать все иконки одновременно.

<b>Внимание!</b> Такой подход приведет к тому, что все иконки библиотеки окажутся
в результирующем бандле.

<Source
  code={`import { meIconSet } from '@monitel/me-icons';
import { MeIconsRegistry } from '@monitel/me-icons-registry';

export class AppComponent {
  constructor(private meIconRegistry: MeIconsRegistry) {
    meIconRegistry.registerIcons(meIconSet);
  }
}`}
  language="js"
  dark
/>

<h4>Регистрация иконок (оптимизированный способ)</h4>

Регистрация иконок по отдельности позволит добавить в результирующий бандл только нужные иконки.

<Source
  code={`import { me24Add, me24Close, me24Edit } from '@monitel/me-icons';
import { MeIconsRegistry } from '@monitel/me-icons-registry';

export class AppComponent {
  constructor(private meIconRegistry: MeIconsRegistry) {
    meIconRegistry.registerIcons([me24Add, me24Close, me24Edit]);
  }
}`}
  language="js"
  dark
/>

<h3 id="icon-in-markup">Использование иконок в разметке</h3>

Обратите внимание, что в аттрибут <b>name</b> передается строка.

<Source
  code={`<me-icon name="me24Add"></me-icon>
<me-icon name="me24Close" color="var(--Icon-Secondary)"></me-icon>
<me-icon name="me24Edit" color="var(--Icon-Blue)"></me-icon>`}
  language="js"
  dark
/>

<h3 id="icon-in-dx">Использование иконок в компонентах DevExtreme</h3>

При необходимости передать иконку в компонент DevExtreme, сначала получаем её в свойство компонента

<Source
  code={`constructor(private meIconRegistry: MeIconsRegistry) {
  ...
  this.add = meIconRegistry.getIcon(me24Add, 'var(--Icon-Error)');
}`}
  language="js"
  dark
/>

Затем байндим свойство класса к аттрибуту icon компонента DevExtreme

<Source
  code={`<dx-button meButton [leftIcon]="add" text="Добавить"></dx-button>
`}
  language="js"
  dark
/>

<h3 id="api">API</h3>

#### Сервис `MeIconsRegistry` имеет два метода:

1. <b>registerIcons(icons: MeIcon[]) => void</b> - принимает массив иконок из состава
   библиотеки, которые необходимо зарегистрировать для использования в компоненте

<Source
  code={`import { me24Add, me24Close, me24Edit } from '@monitel/me-icons';

export class AppComponent {
  constructor(private meIconRegistry: MeIconsRegistry) {
    meIconRegistry.registerIcons([me24Add, me24Close, me24Edit]);
  }
}`}
  language="js"
  dark
/>

2. <b>getIcon(iconName: MeIcon, color?: string) => string | undefined</b> - принимает
   имя иконки и опционально цвет (по умолчанию <b>--Icon-Default</b>),
   возвращает иконку в виде строки или undefined если иконка не зарегистрирована

<Source
  code={`constructor(private meIconRegistry: MeIconsRegistry) {
  ...
  this.add_24 = meIconRegistry.getIcon('me24Add', 'var(--Icon-Cyan-Position)');
}`}
  language="js"
  dark
/>

#### Компонент <b>`<me-icon>`</b> принимает два входных значения:

1. <b>name: meIcons</b> - наименование иконки

<Source code={`<me-icon name="me24Add"></me-icon>`} language="js" dark />

2. <b>color: string</b> - цвет иконки, по умолчанию <b>--Icon-Default</b>

<Source
  code={`<me-icon name="me24Close" color="var(--Icon-Secondary)"></me-icon>`}
  language="js"
  dark
/>

<h3 id="color">Изменение размера иконки</h3>

Предполагается, что в библиотеке используются иконки строго заданного размера. Если необходимо изменить размер, то рекомендуется использовать стилизацию в CSS файле.
Изменение размера иконки me24Edit может выглядеть так:

<Source
  code={`::ng-deep me-icon[name='me24Edit'] svg {
  width: 40px;
  height: 40px;
}
`}
  language="css"
  dark
/>

<style>
  {`
      h2 {
        border-bottom: none !important;
    }
`}
</style>
