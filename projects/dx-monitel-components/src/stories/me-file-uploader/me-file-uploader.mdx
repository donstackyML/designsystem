import { Meta, Story, Controls, Source } from "@storybook/addon-docs";
import * as FileUploaderStories from "./me-file-uploader.stories";
import { moduleMetadata } from "@storybook/angular";
import { MeFileUploaderComponent } from "../../public-api";

<Meta
  title="Компоненты/FileUploader(RC)"
  component={MeFileUploaderComponent}
  decorators={[
    moduleMetadata({
      imports: [MeFileUploaderComponent],
    }),
  ]}
  of={FileUploaderStories}
/>

# FileUploader

## Компонент MeFileUploader

Компонент `MeFileUploader` предоставляет возможность загрузки файлов с расширенной функциональностью, включая проверку типов файлов, ограничение размера и поддержку множественной загрузки.

<Story name="Default" of={FileUploaderStories.Default} />
<Controls of={FileUploaderStories.Default} />

<Source of={FileUploaderStories.Default} dark />

## Примеры использования:

### Загрузка одного файла

<Story name="SingleFileUpload" of={FileUploaderStories.SingleFileUpload} />

<Source
  code={`<me-file-uploader [multiple]="false" labelText="Выберите один файл"></me-file-uploader>`}
  dark
  language="html"
/>

### Пользовательские типы файлов

<Story name="CustomFileTypes" of={FileUploaderStories.CustomFileTypes} />

<Source
  code={`<me-file-uploader [allowedFileExtensions]="['doc', 'docx', 'txt']" labelText="Загрузите только документы"></me-file-uploader>`}
  dark
  language="html"
/>

### Загрузка больших файлов

<Story name="LargeFileUpload" of={FileUploaderStories.LargeFileUpload} />

<Source
  code={`<me-file-uploader [maxFileSize]="100 * 1024 * 1024" [minFileSize]="1 * 1024 * 1024" labelText="Загрузите файлы от 1МБ до 100МБ"></me-file-uploader>`}
  dark
  language="html"
/>

### Скрытие списка файлов

<Story name="HideFileList" of={FileUploaderStories.HideFileList} />

<Source
  code={`<me-file-uploader [showFileList]="false"></me-file-uploader>`}
  dark
  language="html"
/>

### Пользовательский текст кнопки

<Story name="CustomButtonText" of={FileUploaderStories.CustomButtonText} />

<Source
  code={`<me-file-uploader selectButtonText="Выбрать файлы"></me-file-uploader>`}
  dark
  language="html"
/>

## Перечень свойств

<Controls story={FileUploaderStories.Default} />

## Обработка событий

Компонент FileUploader поддерживает несколько событий для управления процессом загрузки файлов. Вот пример обработки этих событий:

<Source
  code={`
<me-file-uploader
  (fileAdded)="onFileAdded($event)"
  (fileRemoved)="onFileRemoved($event)"
  (allFilesRemoved)="onAllFilesRemoved()"
  (invalidFile)="onInvalidFile($event)"
></me-file-uploader>

    // В вашем компоненте:
    onFileAdded(file: File) {
      console.log('Файл добавлен:', file);
    }

    onFileRemoved(file: File) {
      console.log('Файл удален:', file);
    }

    onAllFilesRemoved() {
      console.log('Все файлы удалены');
    }

    onInvalidFile(event: { file: File, error: string }) {
      console.log('Недопустимый файл:', event);
    }

`}
dark
language="typescript"
/>

Это позволяет вам реагировать на различные события, связанные с загрузкой файлов.

### Загрузка файлов с пользовательским интерфейсом

<Story name="CustomLabelText" of={FileUploaderStories.CustomLabelText} />

Вы можете настроить текст метки для загрузки файлов, чтобы предоставить пользователям более подробные инструкции:

<Source
  code={`
<me-file-uploader
  labelText="Перетащите ваши файлы сюда или нажмите кнопку ниже"
  selectButtonText="Выбрать файлы"
  [allowedFileExtensions]="['jpg', 'png', 'pdf']"
  [maxFileSize]="5 * 1024 * 1024"
  [multiple]="true"
></me-file-uploader>
`}
  dark
  language="html"
/>

В этом примере мы создаем загрузчик файлов с настраиваемым текстом метки и кнопки, а также устанавливаем ограничения на типы и размер файлов. Это демонстрирует, как вы можете создать более информативный и удобный интерфейс для загрузки файлов, соответствующий потребностям вашего приложения.
