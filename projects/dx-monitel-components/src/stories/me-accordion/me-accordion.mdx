import { Meta, Story, Controls, Source, Canvas } from "@storybook/addon-docs";
import * as AccordionStories from "./me-accordion.stories";
import { moduleMetadata } from "@storybook/angular";
import { DxAccordionModule } from "devextreme-angular";
import { MeAccordionDirective } from "../../public-api";

<Meta
  title="Components/Accordion"
  component={MeAccordionDirective}
  decorators={[
    moduleMetadata({
      declarations: [MeAccordionDirective],
      imports: [DxAccordionModule],
    }),
  ]}
  of={AccordionStories}
/>

# Accordion

## Директива meAccordion

Директива `meAccordion` расширяет функциональность стандартного компонента аккордеона DevExtreme, добавляя дополнительные возможности настройки и обработки событий.

<Canvas name="Default" of={AccordionStories.Default} />
<Controls of={AccordionStories.Default} />

<Source of={AccordionStories.Default} dark />

## Примеры использования:

### Аккордеон малого размера

<Canvas name="Small" of={AccordionStories.Small} />

<Source
  code={`<dx-accordion meAccordion size="small"></dx-accordion>`}
  dark
  language="html"
/>

### Сворачиваемый аккордеон

<Canvas name="Collapsible" of={AccordionStories.Collapsible} />

<Source
  code={`<dx-accordion meAccordion [collapsible]="true"></dx-accordion>`}
  dark
  language="html"
/>

### Аккордеон с множественным выбором

<Canvas name="Multiple" of={AccordionStories.Multiple} />

<Source
  code={`<dx-accordion meAccordion [multiple]="true"></dx-accordion>`}
  dark
  language="html"
/>

### Настройка анимации

<Canvas name="CustomAnimation" of={AccordionStories.CustomAnimation} />

<Source
  code={`<dx-accordion meAccordion [animationDuration]="1000"></dx-accordion>`}
  dark
  language="html"
/>

### Использование пользовательского класса

<Canvas name="CustomClass" of={AccordionStories.CustomClass} />

<Source
  code={`<dx-accordion meAccordion customClass="my-custom-accordion"></dx-accordion>`}
  dark
  language="html"
/>

## Перечень свойств

<Controls story={AccordionStories.Default} />

## Обработка событий

Аккордеон поддерживает стандартные события DevExtreme. Вот пример обработки событий изменения состояния:

<Source
  code={`
<dx-accordion
  meAccordion
  (onCollapsibleChanged)="onCollapsibleChanged($event)"
  (onMultipleChanged)="onMultipleChanged($event)"
  (onSelectedIndexChanged)="onSelectedIndexChanged($event)"
></dx-accordion>

    // В вашем компоненте:
    onCollapsibleChanged(e: any) {
      console.log('Collapsible changed:', e);
    }

    onMultipleChanged(e: any) {
      console.log('Multiple changed:', e);
    }

    onSelectedIndexChanged(e: any) {
      console.log('Selected index changed:', e);
    }

`}
dark
language="typescript"
/>

Это позволяет вам реагировать на изменения состояния аккордеона.

### Аккордеон с кастомным заголовком и иконкой

<Canvas name="CustomHeader" of={AccordionStories.CustomHeader} />

Вы можете настроить внешний вид заголовков элементов аккордеона, используя шаблоны. Вот пример использования кастомного заголовка с иконкой и описанием:

<Source
  code={`
<dx-accordion
  meAccordion
  [dataSource]="dataSource"
  [collapsible]="true"
  itemTitleTemplate="customTitle"
>
  <div *dxTemplate="let item of 'customTitle'">
    <div style="display: flex; align-items: flex-start;">
      <i class="dx-icon-{{item.icon}}" style="margin-right: 10px; font-size: 18px; color: #000;"></i>
      <div>
        <div style="font-weight: bold; font-size: 16px;">{{item.text}}</div>
        <div style="font-weight: inherit; color: gray; font-size: 14px;">{{item.description}}</div>
      </div>
    </div>
  </div>
  <div *dxTemplate="let item of 'item'">
    <p>Content for {{item.text}}</p>
  </div>
</dx-accordion>
`}
  dark
  language="html"
/>

В этом примере мы создаем кастомный заголовок для каждого элемента аккордеона, который включает:

- Иконку DevExtreme, соответствующую элементу
- Заголовок элемента жирным шрифтом
- Описание элемента серым шрифтом под заголовком

Это демонстрирует, как вы можете создать более сложную и информативную структуру заголовка, соответствующую дизайну на изображении.
