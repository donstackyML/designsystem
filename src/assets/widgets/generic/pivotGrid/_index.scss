@use 'sass:color';
@use 'colors' as *;
@use '../colors' as *;
@use 'sizes' as *;
@use '../sizes' as *;
@use '../common/mixins' as *;
@use '../../base/icons' as *;
@use '../gridBase/colors' as *;
@use '../treeView/sizes' as *;
@use '../button/colors' as *;
@use '../../base/pivotGrid' as basePivotGrid with (
  $pivotgrid-drag-header-border-color: $pivotgrid-drag-header-border-color,
  $pivotgrid-drag-header-first-shadow-color: $pivotgrid-drag-header-first-shadow-color,
  $pivotgrid-drag-header-second-shadow-color: $pivotgrid-drag-header-second-shadow-color,
  $pivotgrid-border-color: $pivotgrid-border-color,
  $pivotgrid-common-left-right-padding: $pivotgrid-common-left-right-padding,
  $pivotgrid-area-color: $pivotgrid-area-color,
  $header-filter-color: $header-filter-color,
  $header-filter-color-empty: $header-filter-color-empty,
  $pivotgrid-area-background: $pivotgrid-area-background,
  $pivotgrid-common-top-bottom-padding: $pivotgrid-common-top-bottom-padding,
  $pivotgrid-header-top-bottom-padding: $pivotgrid-common-top-bottom-padding,
  $pivotgrid-field-indicators-offset: $pivotgrid-field-indicators-offset,
  $pivotgrid-indicators-line-height: $pivotgrid-indicators-line-height,
  $pivotgrid-totalcolor: $pivotgrid-totalcolor,
  $pivotgrid-field-area-text-color: $pivotgrid-field-area-text-color,
  $pivotgrid-data-area-color: $pivotgrid-data-area-color,
  $pivotgrid-grandtotalcolor: $pivotgrid-grandtotalcolor,
  $pivotgrid-accent-color: $pivotgrid-accent-color,
  $pivotgrid-area-all-image: $pivotgrid-area-all-image,
  $pivotgrid-area-filter-image: $pivotgrid-area-filter-image,
  $pivotgrid-area-row-image: $pivotgrid-area-row-image,
  $pivotgrid-area-column-image: $pivotgrid-area-column-image,
  $pivotgrid-area-data-image: $pivotgrid-area-data-image,
  $pivotgrid-dimension-image: $pivotgrid-dimension-image,
  $pivotgrid-hierarchy-image: $pivotgrid-hierarchy-image
);

// adduse

.dx-pivotgrid {
  background-color: $pivotgrid-area-background;

  .dx-area-description-cell {
    .dx-button-content {
      padding: 5px;
    }
  }

  .dx-column-header,
  .dx-filter-header {
    .dx-pivotgrid-toolbar {
      .dx-button-content {
        padding: 5px;
      }

      .dx-button {
        margin-top: 10px;
      }
    }
  }

  .dx-expand-icon-container {
    @include dx-icon(spinright);

    &::before {
      visibility: hidden;
    }
  }

  .dx-pivotgrid-collapsed .dx-expand {
    @include dx-icon(spinright);
    @include dx-icon-font-centered-sizing($generic-base-icon-size);

    color: $pivotgrid-spin-icon-color;
  }

  .dx-pivotgrid-expanded .dx-expand {
    @include dx-icon(spindown);
    @include dx-icon-font-centered-sizing($generic-base-icon-size);

    color: $pivotgrid-spin-icon-color;
  }

  .dx-area-tree-view {
    td.dx-white-space-column {
      width: $pivotgrid-empty-column-width;
      min-width: $pivotgrid-empty-column-width;
    }
  }

  .dx-ie {
    .dx-pivotgrid-fields-area {
      @include dx-base-typography();
    }
  }
}

.dx-pivotgridfieldchooser {
  background-color: $pivotgrid-area-background;
}

.dx-pivotgrid-fields-container {
  .dx-position-indicator {
    background-color: $pivotgrid-position-indicator-color;
  }
}

.me-pivot-grid {
  padding: 16px;
  border: 1px solid var(--dividers-borders-long);
  border-radius: 4px;
  .dx-total,
  .dx-area-description-cell {
    background: var(--Background-Canvas);
  }
  //иконки открытия и закрытия группировки
  td.dx-pivotgrid-collapsed,
  td.dx-pivotgrid-expanded {
    .dx-expand-icon-container {
      margin-left: 0px;
      width: 20px;
      margin-right: 4px;
      height: 16px;
    }
    .dx-expand::before {
      color: $base-text-color;
      height: 20px;
      width: 20px;
      align-content: center;
    }
  }
  .dx-pivotgrid-container {
    .dx-word-wrap {
      //header
      tr {
        .dx-area-description-cell {
          .dx-pivotgrid-toolbar {
            padding: 8px;
            .dx-widget.dx-button.dx-button-has-icon.dx-pivotgrid-field-chooser-button {
              background-color: $base-bg;
              .dx-button-content {
                .dx-icon {
                  font-family: var(--me-icon-family);
                }
                .dx-icon-columnchooser::before {
                  content: var(--me-icon-filter-alt);
                }
              }
            }
          }
        }
        .dx-area-column-cell {
          .dx-scrollable-content {
            tr {
              td {
                padding: 8px;
                font-weight: 600;
                font-size: 13px;
                color: $base-text-color;
              }
              td:not(.dx-pivotgrid-collapsed, .dx-pivotgrid-expanded) {
                text-align: right;
              }
            }
          }
        }
      }
      //table
      tr.dx-bottom-row {
        table {
          tbody {
            tr {
              td {
                padding: 5px 8px;
                font-size: 13px;
                font-weight: 400;
                color: $base-text-color;
              }
            }
          }
        }
      }
    }
  }
}

.dx-overlay-wrapper {
  //icons
  .dx-header-filter {
    font-family: var(--me-icon-family);
    &::before {
      content: var(--me-icon-filter-alt);
    }
  }
  .dx-icon-filter {
    font-family: var(--me-icon-family);
    &::before {
      content: var(--me-icon-filter-alt);
    }
  }
  .dx-checkbox-indeterminate {
    .dx-checkbox-icon {
      &::before {
        height: 3px;
        width: 12px;
        margin-top: -1px;
        margin-left: -6px;
      }
    }
  }
}

.dx-scrollable-container {
  .dx-state-hover {
    background-color: transparent;
  }
  .dx-scrollable-scrollbar.dx-scrollbar-vertical {
    width: auto;
    padding: 0;
    border-radius: 10px;
    .dx-scrollable-scroll {
      width: 8px;
      border-radius: 10px;
    }
  }
  .dx-scrollable-scroll-content {
    border-radius: 10px;
  }
  .dx-scrollbar-horizontal.dx-scrollable-scrollbar.dx-state-hover {
    height: 8px;
    .dx-scrollable-scroll {
      height: 8px;
    }
  }
}
